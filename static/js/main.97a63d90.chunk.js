(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{63:function(e,t,s){},99:function(e,t,s){"use strict";s.r(t);var c=s(1),a=s.n(c),r=s(54),n=s.n(r),i=(s(63),s(32)),l=s(3),o=s(2),d=s(24),j=s.n(d),m=s(0);var b=function(e){var t=e.color,s=e.size;return Object(m.jsx)("div",{className:"row m-0 my-2",children:Object(m.jsx)("div",{className:"col m-auto",children:Object(m.jsx)(j.a,{className:"m-auto",type:"spin",color:t||"#fff",height:s||200,width:s||200})})})};var u=function(e){var t=e.message;return Object(m.jsx)("div",{style:{backgroundColor:"#ffaec7",color:"#b50f41",marginBottom:"5px",padding:"5px 2px"},children:t})},x=s(55),f=Object(x.io)("https://chat-app-api-001.herokuapp.com",{transport:["websocket"]}),p=s(56),O=(s(93),new p.a({closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-center",preventDuplicates:!0,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}));var h=function(){var e=Object(l.f)(),t=Object(c.useRef)(),s=Object(c.useRef)(),a=Object(c.useRef)(),r=Object(c.useState)([]),n=Object(o.a)(r,2),i=n[0],d=n[1],j=Object(c.useState)(!0),x=Object(o.a)(j,2),p=x[0],h=x[1],v=Object(c.useState)(!0),g=Object(o.a)(v,2),N=g[0],y=g[1],w=Object(c.useState)(!1),S=Object(o.a)(w,2),z=S[0],k=S[1];Object(c.useEffect)((function(){var t=!0,s=localStorage.getItem("my_profile");return t&&(h(!1),s&&(y(!1),e.push("/chat")),y(!1)),function(){t=!1}}),[]);var E=function(c){c.preventDefault();var r={email:t.current.value,name:s.current.value,password:a.current.value};d([]);var n=!1;""===r.email&&(n=!0,O.warning("Please enter your email!")),""===r.name&&(n=!0,O.warning("Please enter your name!")),0==r.password.length&&(n=!0,O.warning("Please enter a valid password!")),n||(h(!0),f.emit("signup",r,(function(t){h(!1),t&&t.user&&!t.error?(O.success(t.message),localStorage.setItem("my_profile",JSON.stringify(t.user)),e.push("/chat")):O.info(t.message)})))},C=function(s){s.preventDefault();var c={email:t.current.value,password:a.current.value};d([]);var r=!1;""===c.email&&(r=!0,O.warning("Please enter your email!")),0==c.password.length&&(r=!0,O.warning("Please enter a valid password!")),r||(h(!0),f.emit("login",c,(function(t){h(!1),console.log("login:: ",t),t&&t.user&&!t.error?(O.success(t.message),localStorage.setItem("my_profile",JSON.stringify(t.user)),e.push("/chat")):O.warning(t.message)})))},M=function(){return Object(m.jsx)(m.Fragment,{children:i.length>0?i.map((function(e,t){return Object(m.jsx)(u,{message:e,type:"danget"},t)})):""})},F=function(){return Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header",children:Object(m.jsx)("div",{style:{fontSize:"20px"},className:"card-title text-title mb-0",children:"Signup"})}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)(M,{}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-lg-10 col-md-10 m-auto ",children:Object(m.jsxs)("form",{onSubmit:E,children:[Object(m.jsxs)("div",{className:"form-outline mb-2",children:[Object(m.jsx)("input",{type:"text",id:"form1Example1",className:"form-control",ref:s}),Object(m.jsx)("label",{className:"form-label",htmlFor:"form1Example1",children:"Name"})]}),Object(m.jsxs)("div",{className:"form-outline mb-2",children:[Object(m.jsx)("input",{type:"email",id:"form1Example2",className:"form-control",ref:t}),Object(m.jsx)("label",{className:"form-label",htmlFor:"form1Example2",children:"Email"})]}),Object(m.jsxs)("div",{className:"form-outline mb-2",children:[Object(m.jsx)("input",{type:"password",id:"form1Example3",className:"form-control",ref:a}),Object(m.jsx)("label",{className:"form-label",htmlFor:"form1Example3",children:"Password"})]}),Object(m.jsx)("button",{disabled:p,type:"submit",className:"btn btn-primary btn-block mt-3",children:p?Object(m.jsx)(b,{size:20}):"Signup"})]})})})]})]})},L=function(){return Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header",children:Object(m.jsx)("div",{style:{fontSize:"20px"},className:"card-title text-title mb-0",children:"Join Now"})}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)(M,{}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-lg-10 col-md-10 m-auto ",children:Object(m.jsxs)("form",{onSubmit:C,children:[Object(m.jsxs)("div",{className:"form-outline mb-2",children:[Object(m.jsx)("input",{type:"email",id:"form1Example2",className:"form-control",ref:t}),Object(m.jsx)("label",{className:"form-label",htmlFor:"form1Example2",children:"Email"})]}),Object(m.jsxs)("div",{className:"form-outline mb-2",children:[Object(m.jsx)("input",{type:"password",id:"form1Example3",className:"form-control",ref:a}),Object(m.jsx)("label",{className:"form-label",htmlFor:"form1Example3",children:"Password"})]}),Object(m.jsx)("button",{disabled:p,type:"submit",className:"btn btn-success btn-block mt-3",children:p?Object(m.jsx)(b,{size:20}):"Join"})]})})})]})]})};return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"text-center mt-5",children:N?Object(m.jsx)(b,{size:50}):Object(m.jsx)("div",{className:"row m-0",children:Object(m.jsxs)("div",{className:"col-xl-4 col-lg-5 col-md-8 col-sm-10 col-xs-11 m-auto",children:[z?Object(m.jsx)(L,{}):Object(m.jsx)(F,{}),Object(m.jsx)("div",{className:"mt-4 text-light",style:{cursor:"pointer",fontSize:"18px"},children:z?Object(m.jsxs)("div",{children:["Do not have account?",Object(m.jsx)("span",{onClick:function(){return k(!1)},className:"text-primary px-2",children:"Signup now!"})]}):Object(m.jsxs)("div",{children:["Already have an account?",Object(m.jsx)("span",{onClick:function(){return k(!0)},className:"text-success px-2",children:"Join now!"})]})})]})})})})},v=s(16),g=s.n(v),N=s(25),y=s(5);var w=function(){var e=Object(l.f)(),t=function(){var t=Object(N.a)(g.a.mark((function t(){var s,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(s=localStorage.getItem("my_profile"))&&(c=JSON.parse(s),f.emit("logout",{userid:c.userid}),f.off()),localStorage.removeItem("my_profile"),e.push("/");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"row m-0",children:Object(m.jsx)("div",{className:"col m-auto ",style:{paddingRight:0,fontSize:"15px",cursor:"pointer"},children:Object(m.jsx)("i",{className:"fas fa-sign-out-alt text-primary fa-lg p-2",onClick:t})})})};var S=function(e){e.image;var t=e.name;return Object(m.jsx)("div",{children:t?Object(m.jsx)("div",{className:"rounded-circle ml-2 p-0.5 m-auto text-center align-item-center",style:{height:"45px",width:"45px",objectFit:"cover",color:"#fff",fontSize:"22px",backgroundColor:"#767676",padding:"7px",fontWeight:565},children:t.toString()[0].toUpperCase()}):Object(m.jsx)("img",{src:"/user2.png",className:"rounded-circle ml-2 p-0.5 m-auto",alt:"",loading:"lazy",style:{height:"50px",width:"50px",objectFit:"cover",backgroundColor:"#767676",padding:"2px"}})})};var z={userName:{},userStatus:{color:"rgb(8, 212, 137)",fontSize:"12px"},userTyping:{fontSize:"12px"}},k=function(e){var t=e.user,s=(e.isOnline,e.isLoading),c=(Object(l.f)(),function(){return Object(m.jsx)("div",{className:"row m-0",children:Object(m.jsx)("div",{className:"col",style:{paddingLeft:0},children:Object(m.jsx)(y.b,{to:"/",children:Object(m.jsx)("i",{className:"mr-3 fas fa-arrow-left"})})})})});return Object(m.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light py-1 shadow-3-strong",style:{position:"fixed",top:"0px",width:"100%",zIndex:1e3},children:Object(m.jsx)("div",{className:"row m-0",style:{width:"100%"},children:Object(m.jsx)("div",{className:"col-xl-4 col-lg-5 col-md-8 col-sm-10 col-xs-11 m-auto",children:Object(m.jsx)("div",{className:"row m-0",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(m.jsx)(c,{}),s?Object(m.jsx)(b,{size:30,color:"#a6a6a6"}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(S,{name:t?t.name:null,image:t?t.image:null,I:!0}),Object(m.jsx)("div",{className:"row m-0 ",children:Object(m.jsxs)("div",{className:"col px-2",children:[Object(m.jsx)("div",{className:"row m-0",children:Object(m.jsx)("div",{className:"col  ",children:Object(m.jsx)("span",{style:z.userName,children:t?t.name:"USER NAME"})})}),Object(m.jsx)("div",{className:"row m-0",children:Object(m.jsx)("div",{className:"col py-0"})})]})})]})]})})})})})})})};var E=function(e){var t=e.name;return Object(l.f)(),Object(m.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light py-1 shadow-3-strong",style:{position:"fixed",top:"0px",width:"100%",zIndex:1e3},children:Object(m.jsx)("div",{className:"row m-0",style:{width:"100%"},children:Object(m.jsx)("div",{className:"col-xl-4 col-lg-5 col-md-8 col-sm-10 col-xs-11 m-auto",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(m.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:Object(m.jsx)("div",{className:"row m-0 ",children:Object(m.jsx)("div",{className:"col px-2",children:Object(m.jsx)("div",{className:"row m-0",children:Object(m.jsx)("div",{className:"col py-2",children:Object(m.jsxs)("span",{style:{color:"#131313",fontWidth:555,fontStyle:"italic",fontFamily:"monospace"},children:["Hi, ",t?t.split(" ",1)[0]:"USER"]})})})})})}),Object(m.jsx)("div",{className:"d-flex flex-row-reverse",children:Object(m.jsx)(w,{})})]})})})})})})},C=s(58),M=s(35),F=s.n(M);var L={messageBody:{marginBottom:"70px",marginTop:"65px"},myMessageLayout:{backgroundColor:"#08d489",color:"#fff",margin:"2px 0px",padding:"10px 15px",fontSize:"16px",float:"right",borderRadius:"20px 20px 0px 20px",wordBreak:"break-word"},myTime:{float:"right",paddingRight:"10px",fontSize:"10px",color:"#fafafa"},userMessageLayout:{backgroundColor:"#fff",color:"#4a6",margin:"2px 0px",padding:"10px 15px",fontSize:"15px",float:"left",borderRadius:"0px 50px 50px 50px",wordBreak:"break-word"},userTime:{float:"left",paddingLeft:"10px",fontSize:"10px",color:"#fff"},admin:{backgroundColor:"#d2d4d3",padding:"3px",borderRadius:"20px",width:"60%",fontSize:"12px",lineHeight:"normal"}},R=function(e){var t=e.messages,s=e.me;function a(e){return function(e){var t=(e=new Date(e)).getHours(),s=e.getMinutes(),c=t>=12?"PM":"AM",a=(t=(t%=12)||12)+":"+(s=s<10?"0"+s:s)+" "+c;return Object(m.jsx)("span",{children:a})}(e.date)}Object(c.useEffect)((function(){return window.scrollTo(0,document.body.scrollHeight),function(){!1}}),[t]);var r=function(e){var t=e.message;t.createOn.toLocaleString([],{hour:"2-digit",minute:"2-digit"});return Object(m.jsx)("div",{className:"row m-0 mb-1",style:{justifyContent:"flex-end"},children:Object(m.jsxs)("div",{className:"col-xl-8 col-lg-8 col-md-9 col-sm-10 col-xs-10 col-10 p-1",children:[Object(m.jsx)("div",{className:"row m-0",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("div",{style:L.myMessageLayout,children:Object(m.jsx)("div",{children:F.a.emojify(t.text)})})})}),Object(m.jsx)("div",{className:"row m-0",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsxs)("div",{className:"",style:L.myTime,children:[Object(m.jsx)(a,{date:t.createOn})," ",t.isSeen?Object(m.jsx)("i",{className:"fas fa-check-double",style:{color:"cadetblue",fontSize:"12px",fontWeight:555,marginLeft:"10px"}}):Object(m.jsx)("i",{className:"fas fa-check",style:{color:"#fff",fontSize:"12px",fontWeight:555,marginLeft:"10px"}})]})})})]})})},n=function(e){var t=e.message;return Object(m.jsx)("div",{className:"row m-0 mb-1",style:{justifyContent:"flex-start"},children:Object(m.jsxs)("div",{className:"col-xl-8 col-lg-8 col-md-9 col-sm-10 col-xs-10 col-10 p-1 ",children:[Object(m.jsx)("div",{className:"row m-0 ",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("div",{style:L.userMessageLayout,children:Object(m.jsx)("div",{children:F.a.emojify(t.text)})})})}),Object(m.jsx)("div",{className:"row m-0",children:Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("div",{style:L.userTime,children:Object(m.jsx)(a,{date:t.createOn})})})})]})})};return Object(m.jsx)("div",{style:L.messageBody,children:t.length>0?t.map((function(e,t){return"admin"===e.user?Object(m.jsx)("div",{className:"text-center m-auto mt-1 mb-1",style:L.admin,children:e.text},t):e.sender===s?Object(m.jsx)(r,{message:e},t):Object(m.jsx)(n,{message:e},t)})):Object(m.jsx)("div",{className:"text-center mt-4 mb-4",children:"Empty chat"})})};var I={inputDiv:{position:"fixed",bottom:"0.2px",width:"inherit"},inputMessageBox:{padding:"25px 20px",borderRadius:"20px"},btnMessageBox:{padding:"10px 17px",borderRadius:"40px",marginLeft:"6px",fontSize:"17px"},btnLoading:{padding:"1px 15px",borderRadius:"40px",marginLeft:"6px",fontSize:"10px"}},B=function(){var e=Object(l.g)().userid,t=Object(l.f)(),s=Object(c.useState)([]),a=Object(o.a)(s,2),r=a[0],n=a[1],i=Object(c.useState)(!0),d=Object(o.a)(i,2),u=d[0],x=d[1],p=Object(c.useState)(!1),h=Object(o.a)(p,2),v=h[0],g=h[1],N=Object(c.useState)(),y=Object(o.a)(N,2),w=y[0],S=y[1],z=Object(c.useState)(),E=Object(o.a)(z,2),M=E[0],F=E[1],L=Object(c.useState)(),B=Object(o.a)(L,2),T=(B[0],B[1],Object(c.useRef)());return Object(c.useEffect)((function(){var s,c=!0,a=localStorage.getItem("my_profile");return a&&(s=JSON.parse(a),c&&S(s)),f.emit("join",{userid:e,myuserid:s.userid},(function(e){e.error;var s=e.join,a=e.user,r=e.list;if(!s)return c&&x(!1),t.push("/login");c&&(F(a),n(Object(C.a)(r)),x(!1))})),function(){c=!1}}),[]),Object(c.useEffect)((function(){f.on("message",(function(e){O.info("mesgae received"),n(e),x(!1)}))}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(k,{isLoading:u,user:M||null}),Object(m.jsx)("div",{className:"row m-0",children:Object(m.jsxs)("div",{className:"col-xl-4 col-lg-5 col-md-8 col-sm-10 col-xs-11 m-auto",children:[u?Object(m.jsx)(b,{size:35}):Object(m.jsx)(R,{messages:r,me:w.userid}),Object(m.jsx)("div",{className:"row m-0 px-2",style:I.inputDiv,children:Object(m.jsx)("div",{className:"col-11 p-0",children:Object(m.jsx)("form",{onSubmit:function(s){s.preventDefault(),g(!0);var c=T.current.value;c=c.trim();var a={sender:w.userid,receiver:e,text:c,date:new Date,isSent:!1};c.length>0?f.emit("sendMessage",{data:a},(function(e){if(e&&e.error)return g(!1),alert(e.error),t.push("/chat");e.list&&n(e.list),g(!1),T.current.focus(),T.current.value=""})):g(!1)},className:"p-0 form-inline",children:Object(m.jsxs)("div",{className:"input-group mb-3",children:[Object(m.jsx)("input",{type:"text",ref:T,disabled:u,readOnly:v,style:I.inputMessageBox,className:"form-control shadow-3-strong ",placeholder:"Type here...","aria-label":"Recipient's username","aria-describedby":"button-addon2"}),Object(m.jsx)("button",{style:v?I.btnLoading:I.btnMessageBox,disabled:u||v,className:"btn btn-primary shadow-3-strong",type:"submit",id:"button-addon2","data-mdb-ripple-color":"dark",children:v?Object(m.jsx)(j.a,{className:"m-auto",type:"spin",color:"#fff",height:25,width:25}):Object(m.jsx)("i",{className:"fas fa-paper-plane"})})]})})})})]})})]})};var T={userName:{color:"#666666",fontSize:"17px"},option:{color:"#a9a9a9",fontSize:"14px"},userStatus:{fontSize:"12px",color:"rgb(8, 212, 137)"},userTyping:{fontSize:"12px"}},D=function(e){var t=e.userlist,s=e.statuslist,c=e.state,a=Object(l.f)();Object(l.h)();var r=function(e){var t=e.data,s=e.isOnline,r=t.userid,n=t.name,i=t.image,l=t.lastSeen;return Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("hr",{className:"my-0"}),Object(m.jsx)("div",{className:"card-body py-2 userlist","data-mdb-dismiss":"modal","aria-label":"Close",onClick:function(){!function(e){var t=e.userid;a.push("/chat/".concat(t))}({userid:r})},children:Object(m.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(m.jsx)(S,{image:i,name:n}),Object(m.jsx)("div",{className:"row m-0 ",children:Object(m.jsxs)("div",{className:"col px-2",children:[Object(m.jsx)("div",{className:"row m-0",children:Object(m.jsx)("div",{className:"col  ",children:Object(m.jsx)("span",{style:T.userName,children:n||"USER NAME"})})}),!c&&!s&&Object(m.jsx)("div",{className:"row m-0",children:Object(m.jsx)("div",{className:"col  ",children:Object(m.jsxs)("span",{style:T.option,children:["last seen ",l||"10:10 AM"]})})})]})})]})})}),Object(m.jsx)("hr",{className:"my-0"})]})};return Object(m.jsx)("div",{children:t&&t.length>0?t.map((function(e,t){var c=s.filter((function(t){return t.userid===e.userid}));return Object(m.jsx)(r,{data:e,isOnline:c},t)})):Object(m.jsx)("div",{className:"text-center my-4",children:"-- No Message Yet --"})})};var P=function(){var e=Object(l.f)(),t=Object(c.useState)(),s=Object(o.a)(t,2),a=s[0],r=s[1],n=Object(c.useState)(!1),i=Object(o.a)(n,2),d=i[0],j=i[1],u=Object(c.useState)([]),x=Object(o.a)(u,2),p=x[0],h=x[1],v=Object(c.useState)([]),y=Object(o.a)(v,2),w=(y[0],y[1]),S=Object(c.useState)([]),z=Object(o.a)(S,2),k=z[0],C=z[1],M=Object(c.useState)(!0),F=Object(o.a)(M,2),L=F[0],R=F[1],I=Object(c.useState)(!1),B=Object(o.a)(I,2),T=(B[0],B[1]);return Object(c.useEffect)((function(){var t=!0,s=localStorage.getItem("my_profile");if(s){var c=JSON.parse(s);f.emit("verifyUser",c,function(){var s=Object(N.a)(g.a.mark((function s(a){var n;return g.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:a.error,a.isVerified?(t&&r(c),n=c.userid,f.emit("getAllChatUser",{userid:n},(function(e){var s=e.users;t&&w(s)})),f.emit("getAllUser",{userid:n},(function(e){var s=e.users;t&&(h(s),R(!1))}))):(O.warning("Please login!"),localStorage.removeItem("my_profile"),e.push("/"));case 2:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}())}else O.warning("Please login!"),localStorage.removeItem("my_profile"),e.push("/");return f.on("newUserAdded",(function(e){var s=e.load,c=e.name;s&&(O.info("".concat(c," is added to your list!")),t&&(T(s),j(!d),R(!1)))})),f.on("currentUserStatus",(function(e){e.status;alert("currentUserStatus")})),f.on("getUserStatus",(function(e){var s=e.status;t&&(C(s),R(!1))})),f.on("notification",(function(e){var s=e.text;t&&O.info(s)})),function(){t=!1}}),[d]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(E,{name:a?a.name:"User"}),Object(m.jsx)("div",{className:"container-fluid mt-5 pt-3",children:L?Object(m.jsx)(b,{size:"50px"}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"row m-0 my-2",children:Object(m.jsx)("div",{className:"col-xl-4 col-lg-5 col-md-8 col-sm-10 col-xs-11 m-auto",children:Object(m.jsx)(D,{userlist:p,statuslist:k})})})})})]})};var U=function(){var e;return Object(m.jsxs)("div",{children:[Object(m.jsx)(l.a,{exact:!0,path:"/",component:h}),Object(m.jsx)(l.a,{exact:!0,path:"/chat",component:P}),Object(m.jsx)(l.a,(e={exact:!0,path:"/chat/:userid"},Object(i.a)(e,"exact",!0),Object(i.a)(e,"component",B),e))]})},J=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,100)).then((function(t){var s=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,n=t.getTTFB;s(e),c(e),a(e),r(e),n(e)}))};n.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(y.a,{children:Object(m.jsx)(l.c,{children:Object(m.jsx)(U,{})})})}),document.getElementById("root")),J()}},[[99,1,2]]]);
//# sourceMappingURL=main.97a63d90.chunk.js.map